{"remainingRequest":"D:\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\tennis\\java1234-mall-vue\\src\\views\\appoint\\components\\dialog.vue?vue&type=style&index=0&id=1bfdf469&scoped=true&lang=css","dependencies":[{"path":"D:\\tennis\\java1234-mall-vue\\src\\views\\appoint\\components\\dialog.vue","mtime":1734861990710},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1731167281000},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1731167278000},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1731167279000},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1731167284000},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1731167278000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovKiDkvb/nlKggRmxleGJveCDluIPlsYDnoa7kv53miYDmnInooajljZXpobnpg73lnKjlkIzkuIDliJflhoUgKi8NCi5mb3JtLWNvbnRhaW5lciB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IC8qIOaJgOacieihqOWNlemhueWeguebtOaOkuWIlyAqLw0KICBnYXA6IDIwcHg7ICAvKiDmr4/kuKrooajljZXpobnkuYvpl7TnmoTpl7Tot50gKi8NCiAgd2lkdGg6IDEwMCU7ICAvKiDnoa7kv53lrrnlmajlrr3luqblhYXmu6EgKi8NCn0NCg0KLyog5q+P5Liq6KGo5Y2V6aG5ICovDQouZm9ybS1pdGVtIHsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgIC8qIOS/neivgSBsYWJlbCDlkozovpPlhaXmoYbmmK/nq5bnm7TmjpLliJfnmoQgKi8NCiAgZ2FwOiAxMHB4OyAgLyog5o6n5Yi2IGxhYmVsIOWSjOi+k+WFpeahhuS5i+mXtOeahOmXtOi3nSAqLw0KICB3aWR0aDogMTAwJTsgIC8qIOehruS/neavj+S4quihqOWNlemhueeahOWuveW6puWhq+a7oeWuueWZqCAqLw0KfQ0KDQovKiDkuIrkvKDlm77niYfnmoTlrrnlmajvvIznoa7kv53kuIrkvKDmjInpkq7lkozlm77niYfmmL7npLrlnKjlkIzkuIDliJcgKi8NCi51cGxvYWQtZGVtbyB7DQogIHdpZHRoOiAxMDBweDsNCiAgaGVpZ2h0OiAxMDBweDsNCiAgbWFyZ2luLWJvdHRvbTogMTBweDsNCn0NCg0KLyog5pi+56S65LiK5Lyg55qE5Zu+54mHICovDQoudXBsb2FkZWQtaW1hZ2Ugew0KICBkaXNwbGF5OiBmbGV4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCn0NCg0KLmltYWdlLXByZXZpZXcgew0KICB3aWR0aDogODBweDsNCiAgaGVpZ2h0OiA4MHB4Ow0KICBvYmplY3QtZml0OiBjb3ZlcjsgIC8qIOehruS/neWbvueJh+mAguW6lOahhuWGhe+8jOmBv+WFjeWPmOW9oiAqLw0KICBib3JkZXItcmFkaXVzOiA4cHg7DQp9DQoNCi8qIOaOp+WItuavj+S4qiBmb3JtLWl0ZW0g5YaF6YOo55qE6L6T5YWl5qGGICovDQouZWwtaW5wdXQgew0KICB3aWR0aDogMTAwJTsNCn0NCg=="},{"version":3,"sources":["D:\\tennis\\java1234-mall-vue\\src\\views\\appoint\\components\\dialog.vue"],"names":[],"mappings":";AAgKA,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAC/B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACtC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAC7B;;AAEA,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACjD,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACnC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACnC;;AAEA,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAC5B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrB;;AAEA,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACtC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACpB;;AAEA,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb","file":"D:/tennis/java1234-mall-vue/src/views/appoint/components/dialog.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <el-dialog\r\n    :model-value=\"dialogVisible\"\r\n    :title=\"dialogTitle\"\r\n    width=\"50%\"\r\n    @close=\"handleClose\"\r\n  >\r\n    <el-form ref=\"formRef\" :model=\"form\" label-width=\"100px\" :rules=\"rules\" class=\"form-container\">\r\n\r\n      <!-- 场地名称 -->\r\n      <el-form-item label=\"场地名称\" prop=\"name\" class=\"form-item\">\r\n        <el-input v-model=\"form.name\" style=\"width: 100%\"></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 场地图片 -->\r\n      <el-form-item label=\"场地图片\" prop=\"image\" class=\"form-item\">\r\n        <el-upload\r\n          class=\"upload-demo\"\r\n          action=\"/upload\"\r\n          list-type=\"picture-card\"\r\n          :on-success=\"handleImageSuccess\"\r\n          :before-upload=\"beforeUpload\"\r\n        >\r\n          <i class=\"el-icon-plus\"></i>\r\n        </el-upload>\r\n        \r\n        <span v-if=\"form.image\" class=\"uploaded-image\">\r\n          <img :src=\"form.image\" alt=\"场地图片\" class=\"image-preview\">\r\n        </span>\r\n      </el-form-item>\r\n\r\n      <!-- 剩余人数 -->\r\n      <el-form-item label=\"剩余人数\" prop=\"capacity\" class=\"form-item\">\r\n        <el-input v-model=\"form.capacity\" style=\"width: 100%\" type=\"number\"></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 场地描述 -->\r\n      <el-form-item label=\"场地描述\" prop=\"description\" class=\"form-item\">\r\n        <el-input\r\n          v-model=\"form.description\"\r\n          :rows=\"4\"\r\n          type=\"textarea\"\r\n        />\r\n      </el-form-item>\r\n\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleConfirm\">确认</el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineEmits, ref, defineProps, watch } from 'vue'\r\nimport axios from \"@/util/axios\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\n// Props\r\nconst props = defineProps({\r\n  dialogTitle: {\r\n    type: String,\r\n    default: '',\r\n    required: true\r\n  },\r\n  dialogValue: {\r\n    type: Object,\r\n    default: () => {}\r\n  }\r\n})\r\n\r\nconst form = ref({\r\n  id: -1,\r\n  name: '',\r\n  image: '',  // 场地图片路径\r\n  capacity: 0,  // 剩余人数\r\n  description: ''\r\n})\r\n\r\nconst formRef = ref(null)\r\n\r\nconst emits = defineEmits(['update:modelValue', 'initVenueList'])\r\n\r\nconst handleClose = () => {\r\n  formRef.value.resetFields();\r\n  emits('update:modelValue', false)\r\n}\r\n\r\nconst rules = ref({\r\n  name: [\r\n    {\r\n      required: true,\r\n      message: '请输入场地名称！',\r\n    }\r\n  ],\r\n  capacity: [\r\n    { required: true, message: '请输入剩余人数!' },\r\n    { type: 'number', message: '剩余人数必须是数值类型！', transform: (value) => Number(value) },\r\n  ],\r\n  description: [\r\n    {\r\n      required: true,\r\n      message: '请输入场地描述！',\r\n    },\r\n  ],\r\n})\r\n\r\nconst handleImageSuccess = (response) => {\r\n  // 假设图片上传成功后，返回的响应包含图片的 URL 地址\r\n  form.value.image = response.url;\r\n  ElMessage.success('图片上传成功');\r\n}\r\n\r\nconst beforeUpload = (file) => {\r\n  const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\r\n  if (!isJPG) {\r\n    ElMessage.error('上传图片只能是 JPG 或 PNG 格式!');\r\n  }\r\n  const isLt2M = file.size / 1024 / 1024 < 2;\r\n  if (!isLt2M) {\r\n    ElMessage.error('上传图片大小不能超过 2MB!');\r\n  }\r\n  return isJPG && isLt2M;\r\n}\r\n\r\nconst handleConfirm = () => {\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      try {\r\n        let result = await axios.post(\"admin/venue/save\", form.value);\r\n        let data = result.data;\r\n        if (data.code === 0) {\r\n          ElMessage.success(\"场地信息保存成功\");\r\n          formRef.value.resetFields();\r\n          emits(\"initVenueList\");\r\n          handleClose();\r\n        } else {\r\n          ElMessage.error(data.msg);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"error:\" + err)\r\n        ElMessage.error('系统运行出错，请联系管理员');\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  })\r\n}\r\n\r\nwatch(\r\n  () => props.dialogValue,\r\n  () => {\r\n    form.value = props.dialogValue;\r\n  },\r\n  { deep: true, immediate: true }\r\n)\r\n</script>\r\n<style scoped>\r\n/* 使用 Flexbox 布局确保所有表单项都在同一列内 */\r\n.form-container {\r\n  display: flex;\r\n  flex-direction: column; /* 所有表单项垂直排列 */\r\n  gap: 20px;  /* 每个表单项之间的间距 */\r\n  width: 100%;  /* 确保容器宽度充满 */\r\n}\r\n\r\n/* 每个表单项 */\r\n.form-item {\r\n  display: flex;\r\n  flex-direction: column;  /* 保证 label 和输入框是竖直排列的 */\r\n  gap: 10px;  /* 控制 label 和输入框之间的间距 */\r\n  width: 100%;  /* 确保每个表单项的宽度填满容器 */\r\n}\r\n\r\n/* 上传图片的容器，确保上传按钮和图片显示在同一列 */\r\n.upload-demo {\r\n  width: 100px;\r\n  height: 100px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n/* 显示上传的图片 */\r\n.uploaded-image {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.image-preview {\r\n  width: 80px;\r\n  height: 80px;\r\n  object-fit: cover;  /* 确保图片适应框内，避免变形 */\r\n  border-radius: 8px;\r\n}\r\n\r\n/* 控制每个 form-item 内部的输入框 */\r\n.el-input {\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n"]}]}