{"remainingRequest":"C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\src\\views\\product\\components\\imageDialog.vue?vue&type=template&id=1c21b5c4","dependencies":[{"path":"C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\src\\views\\product\\components\\imageDialog.vue","mtime":1748676132303},{"path":"C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\babel.config.js","mtime":1643881175000},{"path":"C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1731167284000},{"path":"C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1731167281000},{"path":"C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1731167278000},{"path":"C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1731167284000},{"path":"C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1731167278000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gWyJzcmMiXTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJkaWFsb2ctZm9vdGVyIgp9OwoKdmFyIF9ob2lzdGVkXzMgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgi56Gu6K6k5pu05o2iIik7CgpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X2VsX2ljb24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtaWNvbiIpOwoKICB2YXIgX2NvbXBvbmVudF9lbF91cGxvYWQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtdXBsb2FkIik7CgogIHZhciBfY29tcG9uZW50X2VsX2Zvcm0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZm9ybSIpOwoKICB2YXIgX2NvbXBvbmVudF9lbF9idXR0b24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtYnV0dG9uIik7CgogIHZhciBfY29tcG9uZW50X2VsX2RpYWxvZyA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1kaWFsb2ciKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfZGlhbG9nLCB7CiAgICAibW9kZWwtdmFsdWUiOiBfY3R4LmltYWdlRGlhbG9nVmlzaWJsZSwKICAgIHRpdGxlOiAi5ZWG5ZOB5Zu+54mH5pu05o2iIiwKICAgIHdpZHRoOiAiMzAlIiwKICAgIG9uQ2xvc2U6ICRzZXR1cC5oYW5kbGVDbG9zZSwKICAgIGNlbnRlcjogIiIKICB9LCB7CiAgICBmb290ZXI6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICBvbkNsaWNrOiAkc2V0dXAuaGFuZGxlQ29uZmlybQogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfaG9pc3RlZF8zXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgICAgLyogU1RBQkxFICovCgogICAgICB9KV0pXTsKICAgIH0pLAogICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm0sIHsKICAgICAgICByZWY6ICJmb3JtUmVmIiwKICAgICAgICBtb2RlbDogJHNldHVwLmZvcm0sCiAgICAgICAgImxhYmVsLXdpZHRoIjogIjEwMHB4IiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgInRleHQtYWxpZ24iOiAiY2VudGVyIgogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdXBsb2FkLCB7CiAgICAgICAgICAgIGhlYWRlcnM6ICRzZXR1cC5oZWFkZXJzLAogICAgICAgICAgICBjbGFzczogImF2YXRhci11cGxvYWRlciIsCiAgICAgICAgICAgIGFjdGlvbjogJHNldHVwLmdldFNlcnZlclVybCgpICsgJy9hZG1pbi9wcm9kdWN0L3VwbG9hZEltYWdlJywKICAgICAgICAgICAgInNob3ctZmlsZS1saXN0IjogZmFsc2UsCiAgICAgICAgICAgICJvbi1zdWNjZXNzIjogJHNldHVwLmhhbmRsZUF2YXRhclN1Y2Nlc3MsCiAgICAgICAgICAgICJiZWZvcmUtdXBsb2FkIjogJHNldHVwLmJlZm9yZUF2YXRhclVwbG9hZAogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFskc2V0dXAuaW1hZ2VVcmwgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJpbWciLCB7CiAgICAgICAgICAgICAgICBrZXk6IDAsCiAgICAgICAgICAgICAgICBzcmM6ICRzZXR1cC5pbWFnZVVybCwKICAgICAgICAgICAgICAgIGNsYXNzOiAiYXZhdGFyIgogICAgICAgICAgICAgIH0sIG51bGwsIDgKICAgICAgICAgICAgICAvKiBQUk9QUyAqLwogICAgICAgICAgICAgICwgX2hvaXN0ZWRfMSkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfaWNvbiwgewogICAgICAgICAgICAgICAga2V5OiAxLAogICAgICAgICAgICAgICAgY2xhc3M6ICJhdmF0YXItdXBsb2FkZXItaWNvbiIKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKCRzZXR1cFsiUGx1cyJdKV07CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgICAgIC8qIFNUQUJMRSAqLwoKICAgICAgICAgICAgICB9KSldOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgICAgICB9LCA4CiAgICAgICAgICAvKiBQUk9QUyAqLwogICAgICAgICAgLCBbImhlYWRlcnMiLCAiYWN0aW9uIl0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgICAgLyogU1RBQkxFICovCgogICAgICB9LCA4CiAgICAgIC8qIFBST1BTICovCiAgICAgICwgWyJtb2RlbCJdKV07CiAgICB9KSwKICAgIF86IDEKICAgIC8qIFNUQUJMRSAqLwoKICB9LCA4CiAgLyogUFJPUFMgKi8KICAsIFsibW9kZWwtdmFsdWUiXSk7Cn0="},{"version":3,"mappings":";;;AA0BYA,OAAK,EAAC;;;AAAe,IAAfC,UAAD,GAAL,aAAMC,gBAAe,CAGxB,MAHwB;;AAGpB,OAAJ,SAHwBC,MAGpB,CAAJC,IAAI,EAAJC,MAAI,EAAJC,MAAI,EAAJC,MAAI,EAAJC,KAAI;AAAA,MAAJC,kBAHwB,GAAfC,iBAAe,UAGpB;;AAAA,MAAJC,oBAHwB,GAAfD,iBAAe,CAGxB,WAAI;;AAAA,MAAJE,kBAHwB,GAAfF,iBAAe,UAGpB;;AAAA,MAAJG,oBAHwB,GAAfH,iBAAe,CAGxB,WAAI;;AAAA,MAAJI,oBAHwB,GAAfJ,iBAAe,CAGxB,WAAI;;AAAA,SAAJK,UAHwB,IAAfC,iCAGL,EAMC;AAhCT,mBAAaZ,uBAgCJ;AA/BVa,SAAK,EAAC,QA+BI;AA9BVC,SAAK,EAAC,KA8BI;AA7BTC,WAAK,EAAEZ,kBA6BE;AA5BVa,UAAM,EAAN;AA4BU,GAjCZ,EAKQ;AAiBKC,UAAM,WAEf;AAAA,aAKO,CALPC,oBAKO,MALP,cAKO,CAHLC,aAECV,oBAFD,EAEC;AAFUW,YAAI,EAAC,SAEf;AAF0BC,eAAK,EAAElB;AAEjC,OAFD,EAA+C;AAAAmB,eAAb;AAAA,kBAC7BzB,WAAJ;AAAA,SAD8C;AAC1C0B,SAAJ,EAD8C;AAAb;;AAAa,OAA/C,CAGK,CALP,CAKO,CALP;AAAA,KAFe,CAjBX;AAsBGD,WAAJ,EAD8CE,QAAb;AAAA,aACjC,CApBLL,aAaUX,kBAbV,EAaU;AAbDiB,WAAG,EAAC,SAaH;AAbcC,aAAK,EAAEvB,WAarB;AAb2B,uBAAY,OAavC;AAb+CwB,aAA0B,EAA1B;AAAA;AAAA;AAa/C,OAbV,EAAmF;AAAAL,eAA1B;AAAA,kBACvDH,aASYZ,oBATZ,EASY;AARTqB,mBAAO,EAAEzB,cAQA;AAPVP,iBAAK,EAAC,iBAOI;AANTiC,kBAAM,EAAE1B,wBAAY,4BAMX;AALT,8BAAgB,KAKP;AAJT,0BAAYA,0BAIH;AAHT,6BAAeA;AAGN,WATZ,EAMoC;AAAAmB,mBAAlB,EAAFE,QAAE;AAAA,sBACLrB,eAA2C,IAAnCQ,UAAR,IAAXmB,oBAAsD,KAAtD,EAAsD;AAAAC,mBAAtD,EAAmB,CAAmC;AAAhCC,mBAAG,EAAE7B,eAA2B;AAAjBP,qBAAK,EAAC;AAAW,eAAtD,EAAmD,IAAnD,EAAmD;AAAR;AAA3C,gBAAmDqC,UAAnD,CAAsD,KAAHtB,UAAR,gBAC3C,CAA+DN,kBAA/D,EAA+D;AAAA0B,mBAA/D,EADmD,CACY;AAA/CnC,qBAAK,EAAC;AAAyC,eAA/D,EAA4C;AAAA0B,uBAAtB;AAAA,0BAAuBH,aAAQhB,cAAR,CAAQ,CAAR;AAAA,iBAAD;;;;AAAA,eAA5C,CADsD,EAAtD;AAAA,aADkC;;;;AAAA,WANpC;;AAAA,kCASY,CATZ;AAAA,SADiF;;;;AAAA,OAAnF;;AAAA,kBAaU,CAbV;AAAA,KAoBS,CAtBH;;;;AAAA,GALR;;AAAA,oBA2BW","names":["class","_hoisted_3","_createTextVNode","render","_ctx","_cache","$props","$setup","$data","_component_el_icon","_resolveComponent","_component_el_upload","_component_el_form","_component_el_button","_component_el_dialog","_openBlock","_createBlock","title","width","onClose","center","footer","_createElementVNode","_createVNode","type","onClick","default","_","_withCtx","ref","model","style","headers","action","_createElementBlock","key","src","_hoisted_1"],"sources":["C:\\Users\\86195\\Desktop\\git_tennis\\tennis\\java1234-mall-vue\\src\\views\\product\\components\\imageDialog.vue"],"sourcesContent":["<template>\r\n\r\n  <el-dialog\r\n    :model-value=\"imageDialogVisible\"\r\n    title=\"商品图片更换\"\r\n    width=\"30%\"\r\n    @close=\"handleClose\"\r\n    center\r\n  >\r\n    <el-form ref=\"formRef\" :model=\"form\" label-width=\"100px\" style=\"text-align: center\">\r\n      <el-upload\r\n        :headers=\"headers\"\r\n        class=\"avatar-uploader\"\r\n        :action=\"getServerUrl()+'/admin/product/uploadImage'\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n      > <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n        <el-icon v-else class=\"avatar-uploader-icon\"><plus /></el-icon>\r\n      </el-upload>\r\n\r\n\r\n    </el-form>\r\n\r\n    <template #footer>\r\n\r\n      <span class=\"dialog-footer\">\r\n\r\n        <el-button type=\"primary\" @click=\"handleConfirm\"\r\n        >确认更换</el-button\r\n        >\r\n      </span>\r\n\r\n    </template>\r\n\r\n  </el-dialog>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { defineEmits,ref ,defineProps,watch} from 'vue'\r\nimport axios from \"@/util/axios\";\r\nimport { ElMessage  } from \"element-plus\";\r\nimport {getServerUrl} from \"@/config/sys\";\r\nimport { Plus } from '@element-plus/icons-vue'\r\n\r\nconst emits=defineEmits(['update:modelValue','initProductList'])\r\n\r\n\r\n\r\nconst props=defineProps({\r\n  id:{\r\n    type:Number,\r\n    default:-1,\r\n    required:true\r\n  }\r\n})\r\n\r\nconst form=ref({\r\n  id:-1,\r\n  proPic:''\r\n})\r\n\r\nconst imageUrl=ref(\"\")\r\n\r\nconst headers=ref({\r\n  token:window.sessionStorage.getItem('token')\r\n})\r\n\r\n\r\nconst imageSrc=ref(\"\")\r\n\r\n\r\n\r\nwatch(\r\n  ()=>props.id,\r\n  ()=>{\r\n    console.log(\"id==\"+props.id);\r\n    let id=props.id;\r\n    form.value.id=id;\r\n\r\n    imageSrc.value=getServerUrl()+'/image/product/'+form.value.image;\r\n\r\n\r\n\r\n  },\r\n  {deep:true,immediate:true}\r\n)\r\n\r\nconst beforeAvatarUpload = (file) => {\r\n  const isJPG = file.type === 'image/jpeg'\r\n  const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n  if (!isJPG) {\r\n    ElMessage.error('图片必须是jpg格式')\r\n  }\r\n  if (!isLt2M) {\r\n    ElMessage.error('图片大小不能超过2M!')\r\n  }\r\n  return isJPG && isLt2M\r\n}\r\n\r\nconst handleAvatarSuccess = (res) => {\r\n console.log(res.data)\r\n  imageUrl.value=getServerUrl()+res.data.src;\r\n  form.value.proPic=res.data.title;\r\n}\r\n\r\n\r\nconst handleConfirm = async() => {\r\n  let result=await axios.post(\"admin/product/saveImage\",form.value);\r\n  let data=result.data;\r\n  if(data.code==0){\r\n    ElMessage.success(\"执行成功\");\r\n    imageUrl.value=\"\"\r\n   emits(\"initProductList\")\r\n   handleClose();\r\n  }else{\r\n    ElMessage.error(data.msg);\r\n  }\r\n}\r\n\r\nconst handleClose = () => {\r\n  emits('update:modelValue',false)\r\n}\r\n\r\n</script>\r\n\r\n<style >\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n\r\n</style>"],"sourceRoot":""}]}