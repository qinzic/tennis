{"remainingRequest":"D:\\tennis\\java1234-mall-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\tennis\\java1234-mall-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\tennis\\java1234-mall-vue\\src\\views\\appoint\\components\\dialog.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"D:\\tennis\\java1234-mall-vue\\src\\views\\appoint\\components\\dialog.vue","mtime":1734861990710},{"path":"D:\\tennis\\java1234-mall-vue\\babel.config.js","mtime":1643881175000},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1731167284000},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1731167281000},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1731167284000},{"path":"D:\\tennis\\java1234-mall-vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1731167278000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3Rlbm5pcy9qYXZhMTIzNC1tYWxsLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0IHsgcmVmLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICJAL3V0aWwvYXhpb3MiOwppbXBvcnQgeyBFbE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXBsdXMiOyAvLyBQcm9wcwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBkaWFsb2dUaXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGRpYWxvZ1ZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fQogICAgfQogIH0sCiAgZW1pdHM6IFsndXBkYXRlOm1vZGVsVmFsdWUnLCAnaW5pdFZlbnVlTGlzdCddLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChfX3Byb3BzLCBfcmVmKSB7CiAgICB2YXIgZXhwb3NlID0gX3JlZi5leHBvc2UsCiAgICAgICAgZW1pdHMgPSBfcmVmLmVtaXQ7CiAgICBleHBvc2UoKTsKICAgIHZhciBwcm9wcyA9IF9fcHJvcHM7CiAgICB2YXIgZm9ybSA9IHJlZih7CiAgICAgIGlkOiAtMSwKICAgICAgbmFtZTogJycsCiAgICAgIGltYWdlOiAnJywKICAgICAgLy8g5Zy65Zyw5Zu+54mH6Lev5b6ECiAgICAgIGNhcGFjaXR5OiAwLAogICAgICAvLyDliankvZnkurrmlbAKICAgICAgZGVzY3JpcHRpb246ICcnCiAgICB9KTsKICAgIHZhciBmb3JtUmVmID0gcmVmKG51bGwpOwoKICAgIHZhciBoYW5kbGVDbG9zZSA9IGZ1bmN0aW9uIGhhbmRsZUNsb3NlKCkgewogICAgICBmb3JtUmVmLnZhbHVlLnJlc2V0RmllbGRzKCk7CiAgICAgIGVtaXRzKCd1cGRhdGU6bW9kZWxWYWx1ZScsIGZhbHNlKTsKICAgIH07CgogICAgdmFyIHJ1bGVzID0gcmVmKHsKICAgICAgbmFtZTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Zy65Zyw5ZCN56ew77yBJwogICAgICB9XSwKICAgICAgY2FwYWNpdHk6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWJqeS9meS6uuaVsCEnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnbnVtYmVyJywKICAgICAgICBtZXNzYWdlOiAn5Ymp5L2Z5Lq65pWw5b+F6aG75piv5pWw5YC857G75Z6L77yBJywKICAgICAgICB0cmFuc2Zvcm06IGZ1bmN0aW9uIHRyYW5zZm9ybSh2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSk7CiAgICAgICAgfQogICAgICB9XSwKICAgICAgZGVzY3JpcHRpb246IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWcuuWcsOaPj+i/sO+8gScKICAgICAgfV0KICAgIH0pOwoKICAgIHZhciBoYW5kbGVJbWFnZVN1Y2Nlc3MgPSBmdW5jdGlvbiBoYW5kbGVJbWFnZVN1Y2Nlc3MocmVzcG9uc2UpIHsKICAgICAgLy8g5YGH6K6+5Zu+54mH5LiK5Lyg5oiQ5Yqf5ZCO77yM6L+U5Zue55qE5ZON5bqU5YyF5ZCr5Zu+54mH55qEIFVSTCDlnLDlnYAKICAgICAgZm9ybS52YWx1ZS5pbWFnZSA9IHJlc3BvbnNlLnVybDsKICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WbvueJh+S4iuS8oOaIkOWKnycpOwogICAgfTsKCiAgICB2YXIgYmVmb3JlVXBsb2FkID0gZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycgfHwgZmlsZS50eXBlID09PSAnaW1hZ2UvcG5nJzsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWbvueJh+WPquiDveaYryBKUEcg5oiWIFBORyDmoLzlvI8hJyk7CiAgICAgIH0KCiAgICAgIHZhciBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7CgogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5LiK5Lyg5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH07CgogICAgdmFyIGhhbmRsZUNvbmZpcm0gPSBmdW5jdGlvbiBoYW5kbGVDb25maXJtKCkgewogICAgICBmb3JtUmVmLnZhbHVlLnZhbGlkYXRlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh2YWxpZCkgewogICAgICAgICAgdmFyIHJlc3VsdCwgZGF0YTsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiYWRtaW4vdmVudWUvc2F2ZSIsIGZvcm0udmFsdWUpOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlc3VsdC5kYXRhOwoKICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCLlnLrlnLDkv6Hmga/kv53lrZjmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgICBmb3JtUmVmLnZhbHVlLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICAgICAgICAgICAgZW1pdHMoImluaXRWZW51ZUxpc3QiKTsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVDbG9zZSgpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZXJyb3I6IiArIF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfns7vnu5/ov5DooYzlh7rplJnvvIzor7fogZTns7vnrqHnkIblkZgnKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgOV1dKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9OwoKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLmRpYWxvZ1ZhbHVlOwogICAgfSwgZnVuY3Rpb24gKCkgewogICAgICBmb3JtLnZhbHVlID0gcHJvcHMuZGlhbG9nVmFsdWU7CiAgICB9LCB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSk7CiAgICB2YXIgX19yZXR1cm5lZF9fID0gewogICAgICBwcm9wczogcHJvcHMsCiAgICAgIGZvcm06IGZvcm0sCiAgICAgIGZvcm1SZWY6IGZvcm1SZWYsCiAgICAgIGVtaXRzOiBlbWl0cywKICAgICAgaGFuZGxlQ2xvc2U6IGhhbmRsZUNsb3NlLAogICAgICBydWxlczogcnVsZXMsCiAgICAgIGhhbmRsZUltYWdlU3VjY2VzczogaGFuZGxlSW1hZ2VTdWNjZXNzLAogICAgICBiZWZvcmVVcGxvYWQ6IGJlZm9yZVVwbG9hZCwKICAgICAgaGFuZGxlQ29uZmlybTogaGFuZGxlQ29uZmlybSwKICAgICAgcmVmOiByZWYsCiAgICAgIHdhdGNoOiB3YXRjaCwKICAgICAgYXhpb3M6IGF4aW9zLAogICAgICBFbE1lc3NhZ2U6IEVsTWVzc2FnZQogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7CiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gX19yZXR1cm5lZF9fOwogIH0KfTs="},{"version":3,"mappings":"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","names":["ref","watch","axios","ElMessage","props","dialogTitle","type","String","default","required","dialogValue","Object","emits","setup","expose","form","id","name","image","capacity","description","formRef","handleClose","value","resetFields","rules","message","transform","Number","handleImageSuccess","response","url","success","beforeUpload","file","isJPG","error","isLt2M","size","handleConfirm","validate","valid","post","result","data","code","msg","console","deep","immediate","enumerable"],"sources":["D:/tennis/java1234-mall-vue/src/views/appoint/components/dialog.vue"],"sourcesContent":["<template>\r\n  <el-dialog\r\n    :model-value=\"dialogVisible\"\r\n    :title=\"dialogTitle\"\r\n    width=\"50%\"\r\n    @close=\"handleClose\"\r\n  >\r\n    <el-form ref=\"formRef\" :model=\"form\" label-width=\"100px\" :rules=\"rules\" class=\"form-container\">\r\n\r\n      <!-- 场地名称 -->\r\n      <el-form-item label=\"场地名称\" prop=\"name\" class=\"form-item\">\r\n        <el-input v-model=\"form.name\" style=\"width: 100%\"></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 场地图片 -->\r\n      <el-form-item label=\"场地图片\" prop=\"image\" class=\"form-item\">\r\n        <el-upload\r\n          class=\"upload-demo\"\r\n          action=\"/upload\"\r\n          list-type=\"picture-card\"\r\n          :on-success=\"handleImageSuccess\"\r\n          :before-upload=\"beforeUpload\"\r\n        >\r\n          <i class=\"el-icon-plus\"></i>\r\n        </el-upload>\r\n        \r\n        <span v-if=\"form.image\" class=\"uploaded-image\">\r\n          <img :src=\"form.image\" alt=\"场地图片\" class=\"image-preview\">\r\n        </span>\r\n      </el-form-item>\r\n\r\n      <!-- 剩余人数 -->\r\n      <el-form-item label=\"剩余人数\" prop=\"capacity\" class=\"form-item\">\r\n        <el-input v-model=\"form.capacity\" style=\"width: 100%\" type=\"number\"></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 场地描述 -->\r\n      <el-form-item label=\"场地描述\" prop=\"description\" class=\"form-item\">\r\n        <el-input\r\n          v-model=\"form.description\"\r\n          :rows=\"4\"\r\n          type=\"textarea\"\r\n        />\r\n      </el-form-item>\r\n\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleConfirm\">确认</el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineEmits, ref, defineProps, watch } from 'vue'\r\nimport axios from \"@/util/axios\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\n// Props\r\nconst props = defineProps({\r\n  dialogTitle: {\r\n    type: String,\r\n    default: '',\r\n    required: true\r\n  },\r\n  dialogValue: {\r\n    type: Object,\r\n    default: () => {}\r\n  }\r\n})\r\n\r\nconst form = ref({\r\n  id: -1,\r\n  name: '',\r\n  image: '',  // 场地图片路径\r\n  capacity: 0,  // 剩余人数\r\n  description: ''\r\n})\r\n\r\nconst formRef = ref(null)\r\n\r\nconst emits = defineEmits(['update:modelValue', 'initVenueList'])\r\n\r\nconst handleClose = () => {\r\n  formRef.value.resetFields();\r\n  emits('update:modelValue', false)\r\n}\r\n\r\nconst rules = ref({\r\n  name: [\r\n    {\r\n      required: true,\r\n      message: '请输入场地名称！',\r\n    }\r\n  ],\r\n  capacity: [\r\n    { required: true, message: '请输入剩余人数!' },\r\n    { type: 'number', message: '剩余人数必须是数值类型！', transform: (value) => Number(value) },\r\n  ],\r\n  description: [\r\n    {\r\n      required: true,\r\n      message: '请输入场地描述！',\r\n    },\r\n  ],\r\n})\r\n\r\nconst handleImageSuccess = (response) => {\r\n  // 假设图片上传成功后，返回的响应包含图片的 URL 地址\r\n  form.value.image = response.url;\r\n  ElMessage.success('图片上传成功');\r\n}\r\n\r\nconst beforeUpload = (file) => {\r\n  const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\r\n  if (!isJPG) {\r\n    ElMessage.error('上传图片只能是 JPG 或 PNG 格式!');\r\n  }\r\n  const isLt2M = file.size / 1024 / 1024 < 2;\r\n  if (!isLt2M) {\r\n    ElMessage.error('上传图片大小不能超过 2MB!');\r\n  }\r\n  return isJPG && isLt2M;\r\n}\r\n\r\nconst handleConfirm = () => {\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      try {\r\n        let result = await axios.post(\"admin/venue/save\", form.value);\r\n        let data = result.data;\r\n        if (data.code === 0) {\r\n          ElMessage.success(\"场地信息保存成功\");\r\n          formRef.value.resetFields();\r\n          emits(\"initVenueList\");\r\n          handleClose();\r\n        } else {\r\n          ElMessage.error(data.msg);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"error:\" + err)\r\n        ElMessage.error('系统运行出错，请联系管理员');\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  })\r\n}\r\n\r\nwatch(\r\n  () => props.dialogValue,\r\n  () => {\r\n    form.value = props.dialogValue;\r\n  },\r\n  { deep: true, immediate: true }\r\n)\r\n</script>\r\n<style scoped>\r\n/* 使用 Flexbox 布局确保所有表单项都在同一列内 */\r\n.form-container {\r\n  display: flex;\r\n  flex-direction: column; /* 所有表单项垂直排列 */\r\n  gap: 20px;  /* 每个表单项之间的间距 */\r\n  width: 100%;  /* 确保容器宽度充满 */\r\n}\r\n\r\n/* 每个表单项 */\r\n.form-item {\r\n  display: flex;\r\n  flex-direction: column;  /* 保证 label 和输入框是竖直排列的 */\r\n  gap: 10px;  /* 控制 label 和输入框之间的间距 */\r\n  width: 100%;  /* 确保每个表单项的宽度填满容器 */\r\n}\r\n\r\n/* 上传图片的容器，确保上传按钮和图片显示在同一列 */\r\n.upload-demo {\r\n  width: 100px;\r\n  height: 100px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n/* 显示上传的图片 */\r\n.uploaded-image {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.image-preview {\r\n  width: 80px;\r\n  height: 80px;\r\n  object-fit: cover;  /* 确保图片适应框内，避免变形 */\r\n  border-radius: 8px;\r\n}\r\n\r\n/* 控制每个 form-item 内部的输入框 */\r\n.el-input {\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n"]}]}